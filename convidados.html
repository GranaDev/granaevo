<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aceitar Convite ‚Äî GranaEvo</title>
    <link rel="stylesheet" href="convidados.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <canvas id="bg-canvas"></canvas>

    <div class="invite-wrapper">
        <!-- LOGO -->
        <div class="invite-logo">
            <div class="logo-ring">
                <img src="icon/granaevo-logo.jpg" alt="GranaEvo" class="logo-img">
            </div>
            <span class="logo-text">GranaEvo</span>
        </div>

        <!-- CARD PRINCIPAL -->
        <div class="invite-card" id="mainCard">

            <!-- ETAPA 1: Verificar Email + C√≥digo -->
            <div id="step1" class="step active">
                <div class="step-icon">üîê</div>
                <h1 class="step-title">Aceitar Convite</h1>
                <p class="step-desc">
                    Insira o email que recebeu o convite e o <strong>c√≥digo de 6 d√≠gitos</strong>
                    fornecido por quem te convidou.
                </p>

                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-envelope"></i> Seu Email
                    </label>
                    <input type="email" id="inputEmail" class="inv-input" 
                           placeholder="email@exemplo.com" autocomplete="email">
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-key"></i> C√≥digo de 6 D√≠gitos
                    </label>
                    <div class="code-input-wrapper">
                        <input type="text" id="inputCode" class="inv-input code-input" 
                               placeholder="000000" maxlength="6" inputmode="numeric"
                               autocomplete="one-time-code">
                    </div>
                    <div class="input-hint">Digite o c√≥digo fornecido por quem te convidou</div>
                </div>

                <div id="step1Error" class="error-box" style="display:none;"></div>

                <button class="inv-btn" id="btnVerify">
                    <span id="btnVerifyText">Verificar C√≥digo ‚Üí</span>
                    <span id="btnVerifyLoader" style="display:none;">
                        <i class="fas fa-spinner fa-spin"></i> Verificando...
                    </span>
                </button>
            </div>

            <!-- ETAPA 2: Criar Senha -->
            <div id="step2" class="step">
                <div class="step-icon">üéâ</div>
                <h1 class="step-title">C√≥digo V√°lido!</h1>
                <p class="step-desc" id="step2Desc">
                    Bem-vindo(a)! Agora crie sua senha de acesso.
                </p>

                <div class="welcome-box" id="welcomeBox" style="display:none;">
                    <div class="wb-label">Voc√™ foi convidado(a) por</div>
                    <div class="wb-name" id="ownerNameDisplay">‚Äî</div>
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-lock"></i> Crie sua Senha
                    </label>
                    <div class="password-wrapper">
                        <input type="password" id="inputPassword" class="inv-input" 
                               placeholder="M√≠nimo 6 caracteres">
                        <button type="button" class="toggle-pwd" onclick="togglePassword('inputPassword', this)">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="password-strength" id="strengthBar"></div>
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-lock"></i> Confirme sua Senha
                    </label>
                    <div class="password-wrapper">
                        <input type="password" id="inputPasswordConfirm" class="inv-input" 
                               placeholder="Repita a senha">
                        <button type="button" class="toggle-pwd" onclick="togglePassword('inputPasswordConfirm', this)">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <div class="terms-box">
                    <label class="terms-label">
                        <input type="checkbox" id="checkTerms" class="terms-check">
                        <span class="terms-custom-check"></span>
                        <span>
                            Declaro que li e aceito os 
                            <a href="termos.html" target="_blank" class="terms-link">Termos de Uso e Pol√≠tica de Privacidade</a> 
                            do GranaEvo.
                        </span>
                    </label>
                </div>

                <div id="step2Error" class="error-box" style="display:none;"></div>

                <button class="inv-btn" id="btnCreate">
                    <span id="btnCreateText">Criar Minha Conta ‚Üí</span>
                    <span id="btnCreateLoader" style="display:none;">
                        <i class="fas fa-spinner fa-spin"></i> Criando conta...
                    </span>
                </button>

                <button class="inv-btn-ghost" onclick="voltarEtapa1()">
                    ‚Üê Voltar
                </button>
            </div>

            <!-- ETAPA 3: Sucesso -->
            <div id="step3" class="step">
                <div class="step-icon success-pulse">‚úÖ</div>
                <h1 class="step-title">Conta Criada!</h1>
                <p class="step-desc">
                    Sua conta foi criada com sucesso. Agora voc√™ pode entrar no GranaEvo 
                    usando seu email e a senha que acabou de criar.
                </p>

                <div class="success-box">
                    <i class="fas fa-check-circle" style="font-size:2rem; color:#10b981; margin-bottom:12px;"></i>
                    <div style="font-size:0.9rem; color:var(--text-secondary); line-height:1.7;">
                        Use seu <strong style="color:#e2e8f0;">email</strong> e sua 
                        <strong style="color:#e2e8f0;">senha</strong> para fazer login.<br>
                        Voc√™ ter√° acesso √† mesma conta de quem te convidou.
                    </div>
                </div>

                <a href="login.html" class="inv-btn" style="text-decoration:none; text-align:center;">
                    üöÄ Ir para o Login
                </a>
            </div>

        </div>

        <p class="invite-footer">
            ¬© 2026 GranaEvo ¬∑ <a href="termos.html">Termos</a> ¬∑ <a href="mailto:suporte@granaevo.com">Suporte</a>
        </p>
    </div>

    <script src="convidados.js"></script>
</body>
</html>